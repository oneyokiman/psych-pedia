# Markdown百科功能使用指南

## 📖 功能概述

本次更新为Psych-Pedia添加了完整的Markdown百科内容支持，让你可以为每个药物和原理条目添加详细的维基百科风格内容。

## ✨ 新增功能

### 1. Markdown内容渲染
- ✅ 支持完整的GitHub Flavored Markdown (GFM)语法
- ✅ 包括标题、列表、表格、代码块、引用等
- ✅ 支持图片和链接
- ✅ 自动适配深色/浅色主题
- ✅ 优美的排版和样式

### 2. 百科内容区域
每个药物和原理条目下方都新增了"百科详细内容"区域：
- 📝 默认折叠，节省空间
- 👁️ 点击展开查看完整内容
- 📤 一键导出为Markdown文件
- 🎨 维基百科风格的专业排版

### 3. 编辑与预览
- ✏️ 编辑模式：支持Markdown语法实时编写
- 👀 预览模式：实时查看渲染效果
- 💾 保存功能：（可扩展）保存编辑后的内容

### 4. 内容导出
- 点击"导出"按钮即可将百科内容下载为 `.md` 文件
- 适合备份、分享或在其他Markdown编辑器中编辑

## 📝 如何添加百科内容

### 方法一：直接编辑JSON文件

在 `public/drugs.json` 或 `public/principles.json` 中为任意条目添加 `wiki_content` 字段：

```json
{
  "id": "aripiprazole",
  "name_cn": "阿立哌唑",
  "name_en": "Aripiprazole",
  // ... 其他字段 ...
  "wiki_content": "## 概述\n\n阿立哌唑是...\n\n### 作用机制\n\n- 要点1\n- 要点2"
}
```

**注意事项：**
- 使用 `\n` 表示换行
- 使用 `\n\n` 表示段落分隔
- JSON中需要转义特殊字符

### 方法二：使用多行字符串（推荐）

为了更好的可读性，建议使用专门的Markdown文件编写内容，然后转换为JSON字符串：

1. 创建独立的 `.md` 文件编写内容
2. 使用在线工具或脚本将其转换为JSON字符串
3. 粘贴到对应条目的 `wiki_content` 字段

## 🎨 支持的Markdown语法

### 标题
```markdown
# 一级标题
## 二级标题
### 三级标题
```

### 文本格式
```markdown
**粗体文本**
*斜体文本*
~~删除线~~
```

### 列表
```markdown
- 无序列表项1
- 无序列表项2

1. 有序列表项1
2. 有序列表项2
```

### 链接和图片
```markdown
[链接文本](https://example.com)
![图片描述](https://example.com/image.jpg)
```

### 表格
```markdown
| 列1 | 列2 | 列3 |
|-----|-----|-----|
| 内容1 | 内容2 | 内容3 |
```

### 引用
```markdown
> 这是一段引用文本
```

### 代码
```markdown
行内代码：`code`

代码块：
\`\`\`
多行代码
\`\`\`
```

### 分隔线
```markdown
---
```

## 💡 最佳实践

### 1. 结构化组织
建议按以下结构组织百科内容：

```markdown
## 概述
简要介绍药物或原理

## 历史背景
发现和发展历史

## 作用机制
详细的药理学机制

## 临床应用
适应症、用法用量

## 不良反应
常见和严重不良反应

## 药物相互作用
重要的药物相互作用

## 特殊人群
儿童、老年、妊娠等

## 监测要点
临床监测建议

## 循证医学证据
关键研究和证据

## 参考文献
重要文献引用
```

### 2. 使用表格整理信息
表格非常适合对比和整理结构化信息：

```markdown
| 项目 | 数值 | 说明 |
|------|------|------|
| 半衰期 | 75h | 长半衰期 |
| 蛋白结合率 | >99% | 高蛋白结合 |
```

### 3. 突出重点信息
使用emoji和格式突出重要信息：

```markdown
### 主要优势

✅ 代谢副作用风险低
✅ 不升高催乳素
✅ 长半衰期

### 主要局限

⚠️ 静坐不能发生率较高
⚠️ 价格相对较高
```

### 4. 添加图片和图表
支持外部图片链接：

```markdown
![受体结构图](https://example.com/receptor.png)
```

## 🔧 技术实现

### 核心组件

1. **MarkdownEditor** (`components/MarkdownEditor.tsx`)
   - 编辑/预览模式切换
   - 使用 `react-markdown` 进行渲染
   - 支持 GFM 扩展语法

2. **WikiContent** (`components/WikiContent.tsx`)
   - 百科内容展示容器
   - 展开/折叠功能
   - 导出功能

3. **类型定义** (`types.ts`)
   - Drug 和 Principle 接口增加 `wiki_content?: string` 字段

### 使用的依赖包

```json
{
  "react-markdown": "^9.0.0",
  "remark-gfm": "^4.0.0",
  "rehype-raw": "^7.0.0",
  "rehype-sanitize": "^6.0.0"
}
```

## 📋 示例内容

项目已经为以下条目添加了详细的百科内容示例：

### 药物示例
- **阿立哌唑 (Aripiprazole)** - 完整的药物百科内容
  - 包含概述、机制、临床应用、不良反应等章节
  - 使用表格整理剂量调整信息
  - 包含监测要点和循证证据

### 原理示例
- **D2多巴胺受体** - 详细的受体原理说明
  - 解剖分布、信号转导机制
  - 受体亚型对比
  - 临床药理学应用
  - 遗传多态性和成像研究

## 🚀 未来扩展

可以考虑的功能增强：

1. **在线编辑功能**
   - 允许用户直接在界面上编辑内容
   - 实时保存到本地存储或服务器

2. **版本控制**
   - 记录内容修改历史
   - 支持回退到之前的版本

3. **搜索功能**
   - 在百科内容中搜索关键词
   - 高亮显示搜索结果

4. **内容协作**
   - 多用户协作编辑
   - 评论和讨论功能

5. **内容导入**
   - 支持从外部Markdown文件导入
   - 批量导入功能

## 🤝 贡献指南

欢迎为项目贡献更多的百科内容！

1. Fork项目
2. 创建内容分支
3. 编写或完善百科内容
4. 提交Pull Request

## 📞 技术支持

如有问题或建议，请通过以下方式联系：

- 提交GitHub Issue
- 项目讨论区留言

---

**祝你使用愉快！** 🎉
